(function(){"use strict";var mdnBannerEvents={attachEvents:function(banner){this.handleCollapseEvent(banner);this.handleCloseEvent(banner)},handleCloseEvent:function(banner){var closeButton=banner.querySelector(".mdn-cta-close");if(!closeButton){return}closeButton.addEventListener("click",function(){banner.classList.add("hidden");window.mdnBannersStateUtil.setBannerInactive(banner.dataset["banner"])})},handleCollapseEvent:function(banner){var collapseButton=banner.querySelector(".mdn-cta-collapse");if(!collapseButton){return}collapseButton.addEventListener("click",function(){banner.classList.remove("expanded");banner.classList.add("is-collapsed")})}};if(typeof exports==="object"){module.exports=mdnBannerEvents}window.mdnBannerEvents=mdnBannerEvents})();(function(){"use strict";var ALL_BANNER_IDS=["developer_needs","contrib_beta"];var BANNER_DISABLED_EXPIRATION=5*24*60*60*1e3;var LOCALSTORAGE_NAMESPACE="mdnBanner.";var mdnBannersStateUtil={getWaffleEnabledBanners:function(){var activeBannerIds=[];if(window.waffle){activeBannerIds=ALL_BANNER_IDS.filter(function(id){return window.waffle.flag_is_active(id)})}return activeBannerIds},isBannerActive:function(banner){if(window.mdn.features.localStorage){try{var item=localStorage.getItem(LOCALSTORAGE_NAMESPACE+banner);if(item===null){return true}var now=Date.now();item=JSON.parse(item);if(item.timestamp+BANNER_DISABLED_EXPIRATION<now){this.setBannerActive(banner);return true}return false}catch(error){console.error("Error while getting banner state: ",error);return false}}return false},setBannerActive:function(banner){if(banner===undefined){throw"setBannerActive: The banner property is required"}if(window.mdn.features.localStorage){try{localStorage.removeItem(LOCALSTORAGE_NAMESPACE+banner)}catch(error){console.error("Error while setting banner active state: ",error)}}},setBannerInactive:function(banner){if(banner===undefined){throw"setBannerInactive: The banner property is required"}if(window.mdn.features.localStorage){try{var item=JSON.stringify({timestamp:(new Date).getTime()});localStorage.setItem(LOCALSTORAGE_NAMESPACE+banner,item)}catch(error){console.error("Error while setting banner inactive state: ",error)}}}};if(typeof exports==="object"){module.exports=mdnBannersStateUtil}window.mdnBannersStateUtil=mdnBannersStateUtil})();(function(){"use strict";var mdnCtaBanner={show:function(bannersArray){bannersArray.forEach(function maybeCloseBanner(bannerId){if(window.mdnBannersStateUtil.isBannerActive(bannerId)){var activeBanner=document.getElementById(bannerId);if(activeBanner){activeBanner.classList.remove("hidden");window.mdnBannerEvents.attachEvents(activeBanner)}}})}};if(typeof exports==="object"){module.exports=mdnCtaBanner}window.mdnCtaBanner=mdnCtaBanner;window.addEventListener("load",function(){mdnCtaBanner.show(window.mdnBannersStateUtil.getWaffleEnabledBanners())})})();
